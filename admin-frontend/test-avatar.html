<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>头像显示测试</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-5">
        <h1>头像显示测试</h1>
        <div id="test-container"></div>
    </div>

    <script src="js/utils.js"></script>
    <script>
        // 测试用户数据
        const testUsers = [
            { username: 'testuser1', email: 'test1@example.com', profile: {} },
            { username: 'testuser2', email: 'test2@example.com', profile: { avatar: null } },
            { username: 'testuser3', email: 'test3@example.com', profile: { avatar: 'undefined' } },
            { username: 'testuser4', email: 'test4@example.com', profile: { avatar: '' } },
            { username: 'testuser5', email: 'test5@example.com' }, // 无profile
            null // 空用户
        ];

        const container = document.getElementById('test-container');

        testUsers.forEach((user, index) => {
            const userDiv = document.createElement('div');
            userDiv.className = 'mb-3 p-3 border';
            userDiv.innerHTML = `
                <h5>测试用例 ${index + 1}: ${user ? user.username : '空用户'}</h5>
                <div>头像显示：</div>
                ${Utils.avatar.createAvatarHtml(
                    Utils.avatar.getUserAvatar(user),
                    "测试头像",
                    60,
                    "me-3",
                    "user"
                )}
            `;
            container.appendChild(userDiv);
        });
    </script>
</body>
</html>