{"version":3,"file":"index.js","sources":["utils/index.js"],"sourcesContent":["// 工具函数集合\n\n// 格式化日期\nexport const formatDate = (date, format = 'YYYY-MM-DD') => {\n\tconst d = new Date(date)\n\tconst year = d.getFullYear()\n\tconst month = String(d.getMonth() + 1).padStart(2, '0')\n\tconst day = String(d.getDate()).padStart(2, '0')\n\tconst hour = String(d.getHours()).padStart(2, '0')\n\tconst minute = String(d.getMinutes()).padStart(2, '0')\n\tconst second = String(d.getSeconds()).padStart(2, '0')\n\t\n\treturn format\n\t\t.replace('YYYY', year)\n\t\t.replace('MM', month)\n\t\t.replace('DD', day)\n\t\t.replace('HH', hour)\n\t\t.replace('mm', minute)\n\t\t.replace('ss', second)\n}\n\n// 格式化相对时间\nexport const formatRelativeTime = (date) => {\n\tconst now = new Date()\n\tconst target = new Date(date)\n\tconst diff = now - target\n\t\n\tconst minute = 60 * 1000\n\tconst hour = 60 * minute\n\tconst day = 24 * hour\n\tconst week = 7 * day\n\tconst month = 30 * day\n\t\n\tif (diff < minute) {\n\t\treturn '刚刚'\n\t} else if (diff < hour) {\n\t\treturn `${Math.floor(diff / minute)}分钟前`\n\t} else if (diff < day) {\n\t\treturn `${Math.floor(diff / hour)}小时前`\n\t} else if (diff < week) {\n\t\treturn `${Math.floor(diff / day)}天前`\n\t} else if (diff < month) {\n\t\treturn `${Math.floor(diff / week)}周前`\n\t} else {\n\t\treturn formatDate(date, 'YYYY年MM月DD日')\n\t}\n}\n\n// 显示成功提示\nexport const showSuccess = (title, duration = 2000) => {\n\tuni.showToast({\n\t\ttitle,\n\t\ticon: 'success',\n\t\tduration\n\t})\n}\n\n// 显示错误提示\nexport const showError = (title, duration = 2000) => {\n\tuni.showToast({\n\t\ttitle,\n\t\ticon: 'none',\n\t\tduration\n\t})\n}\n\n// 显示加载中\nexport const showLoading = (title = '加载中...') => {\n\tuni.showLoading({\n\t\ttitle,\n\t\tmask: true\n\t})\n}\n\n// 隐藏加载\nexport const hideLoading = () => {\n\tuni.hideLoading()\n}\n\n// 确认对话框\nexport const showConfirm = (content, title = '提示') => {\n\treturn new Promise((resolve) => {\n\t\tuni.showModal({\n\t\t\ttitle,\n\t\t\tcontent,\n\t\t\tsuccess: (res) => {\n\t\t\t\tresolve(res.confirm)\n\t\t\t}\n\t\t})\n\t})\n}\n\n// 获取心情图标\nexport const getMoodIcon = (mood) => {\n\tconst moodMap = {\n\t\thappy: '😊',\n\t\tsad: '😢',\n\t\tangry: '😠',\n\t\texcited: '🤩',\n\t\tcalm: '😌',\n\t\tanxious: '😰'\n\t}\n\treturn moodMap[mood] || ''\n}\n\n// 获取天气图标\nexport const getWeatherIcon = (weather) => {\n\tconst weatherMap = {\n\t\tsunny: '☀️',\n\t\tcloudy: '☁️',\n\t\trainy: '🌧️',\n\t\tsnowy: '❄️',\n\t\twindy: '💨'\n\t}\n\treturn weatherMap[weather] || ''\n}\n\n// 获取活动状态\nexport const getActivityStatus = (startTime, endTime) => {\n\tconst now = new Date()\n\tconst start = new Date(startTime)\n\tconst end = new Date(endTime)\n\t\n\tif (now < start) return 'upcoming'\n\tif (now >= start && now <= end) return 'ongoing'\n\treturn 'ended'\n}\n\n// 获取活动状态文本\nexport const getActivityStatusText = (startTime, endTime) => {\n\tconst status = getActivityStatus(startTime, endTime)\n\tconst statusMap = {\n\t\tupcoming: '即将开始',\n\t\tongoing: '进行中',\n\t\tended: '已结束'\n\t}\n\treturn statusMap[status]\n}\n\n// 防抖函数\nexport const debounce = (func, wait) => {\n\tlet timeout\n\treturn function executedFunction(...args) {\n\t\tconst later = () => {\n\t\t\tclearTimeout(timeout)\n\t\t\tfunc(...args)\n\t\t}\n\t\tclearTimeout(timeout)\n\t\ttimeout = setTimeout(later, wait)\n\t}\n}\n\n// 节流函数\nexport const throttle = (func, limit) => {\n\tlet inThrottle\n\treturn function() {\n\t\tconst args = arguments\n\t\tconst context = this\n\t\tif (!inThrottle) {\n\t\t\tfunc.apply(context, args)\n\t\t\tinThrottle = true\n\t\t\tsetTimeout(() => inThrottle = false, limit)\n\t\t}\n\t}\n}\n"],"names":["uni"],"mappings":";;AAGY,MAAC,aAAa,CAAC,MAAM,SAAS,iBAAiB;AAC1D,QAAM,IAAI,IAAI,KAAK,IAAI;AACvB,QAAM,OAAO,EAAE,YAAa;AAC5B,QAAM,QAAQ,OAAO,EAAE,SAAQ,IAAK,CAAC,EAAE,SAAS,GAAG,GAAG;AACtD,QAAM,MAAM,OAAO,EAAE,QAAS,CAAA,EAAE,SAAS,GAAG,GAAG;AAC/C,QAAM,OAAO,OAAO,EAAE,SAAU,CAAA,EAAE,SAAS,GAAG,GAAG;AACjD,QAAM,SAAS,OAAO,EAAE,WAAY,CAAA,EAAE,SAAS,GAAG,GAAG;AACrD,QAAM,SAAS,OAAO,EAAE,WAAY,CAAA,EAAE,SAAS,GAAG,GAAG;AAErD,SAAO,OACL,QAAQ,QAAQ,IAAI,EACpB,QAAQ,MAAM,KAAK,EACnB,QAAQ,MAAM,GAAG,EACjB,QAAQ,MAAM,IAAI,EAClB,QAAQ,MAAM,MAAM,EACpB,QAAQ,MAAM,MAAM;AACvB;AA8BY,MAAC,cAAc,CAAC,OAAO,WAAW,QAAS;AACtDA,gBAAAA,MAAI,UAAU;AAAA,IACb;AAAA,IACA,MAAM;AAAA,IACN;AAAA,EACF,CAAE;AACF;AAGY,MAAC,YAAY,CAAC,OAAO,WAAW,QAAS;AACpDA,gBAAAA,MAAI,UAAU;AAAA,IACb;AAAA,IACA,MAAM;AAAA,IACN;AAAA,EACF,CAAE;AACF;AAgBY,MAAC,cAAc,CAAC,SAAS,QAAQ,SAAS;AACrD,SAAO,IAAI,QAAQ,CAAC,YAAY;AAC/BA,kBAAAA,MAAI,UAAU;AAAA,MACb;AAAA,MACA;AAAA,MACA,SAAS,CAAC,QAAQ;AACjB,gBAAQ,IAAI,OAAO;AAAA,MACnB;AAAA,IACJ,CAAG;AAAA,EACH,CAAE;AACF;AA4BY,MAAC,oBAAoB,CAAC,WAAW,YAAY;AACxD,QAAM,MAAM,oBAAI,KAAM;AACtB,QAAM,QAAQ,IAAI,KAAK,SAAS;AAChC,QAAM,MAAM,IAAI,KAAK,OAAO;AAE5B,MAAI,MAAM;AAAO,WAAO;AACxB,MAAI,OAAO,SAAS,OAAO;AAAK,WAAO;AACvC,SAAO;AACR;AAGY,MAAC,wBAAwB,CAAC,WAAW,YAAY;AAC5D,QAAM,SAAS,kBAAkB,WAAW,OAAO;AACnD,QAAM,YAAY;AAAA,IACjB,UAAU;AAAA,IACV,SAAS;AAAA,IACT,OAAO;AAAA,EACP;AACD,SAAO,UAAU,MAAM;AACxB;;;;;;;"}