{"version":3,"file":"index.js","sources":["utils/index.js"],"sourcesContent":["// 工具函数集合\r\n\r\n// 格式化日期\r\nexport const formatDate = (date, format = 'YYYY-MM-DD') => {\r\n\tconst d = new Date(date)\r\n\tconst year = d.getFullYear()\r\n\tconst month = String(d.getMonth() + 1).padStart(2, '0')\r\n\tconst day = String(d.getDate()).padStart(2, '0')\r\n\tconst hour = String(d.getHours()).padStart(2, '0')\r\n\tconst minute = String(d.getMinutes()).padStart(2, '0')\r\n\tconst second = String(d.getSeconds()).padStart(2, '0')\r\n\t\r\n\treturn format\r\n\t\t.replace('YYYY', year)\r\n\t\t.replace('MM', month)\r\n\t\t.replace('DD', day)\r\n\t\t.replace('HH', hour)\r\n\t\t.replace('mm', minute)\r\n\t\t.replace('ss', second)\r\n}\r\n\r\n// 格式化相对时间\r\nexport const formatRelativeTime = (date) => {\r\n\tconst now = new Date()\r\n\tconst target = new Date(date)\r\n\tconst diff = now - target\r\n\t\r\n\tconst minute = 60 * 1000\r\n\tconst hour = 60 * minute\r\n\tconst day = 24 * hour\r\n\tconst week = 7 * day\r\n\tconst month = 30 * day\r\n\t\r\n\tif (diff < minute) {\r\n\t\treturn '刚刚'\r\n\t} else if (diff < hour) {\r\n\t\treturn `${Math.floor(diff / minute)}分钟前`\r\n\t} else if (diff < day) {\r\n\t\treturn `${Math.floor(diff / hour)}小时前`\r\n\t} else if (diff < week) {\r\n\t\treturn `${Math.floor(diff / day)}天前`\r\n\t} else if (diff < month) {\r\n\t\treturn `${Math.floor(diff / week)}周前`\r\n\t} else {\r\n\t\treturn formatDate(date, 'YYYY年MM月DD日')\r\n\t}\r\n}\r\n\r\n// 显示成功提示\r\nexport const showSuccess = (title, duration = 2000) => {\r\n\tuni.showToast({\r\n\t\ttitle,\r\n\t\ticon: 'success',\r\n\t\tduration\r\n\t})\r\n}\r\n\r\n// 显示错误提示\r\nexport const showError = (title, duration = 2000) => {\r\n\tuni.showToast({\r\n\t\ttitle,\r\n\t\ticon: 'none',\r\n\t\tduration\r\n\t})\r\n}\r\n\r\n// 显示加载中\r\nexport const showLoading = (title = '加载中...') => {\r\n\tuni.showLoading({\r\n\t\ttitle,\r\n\t\tmask: true\r\n\t})\r\n}\r\n\r\n// 隐藏加载\r\nexport const hideLoading = () => {\r\n\tuni.hideLoading()\r\n}\r\n\r\n// 确认对话框\r\nexport const showConfirm = (content, title = '提示') => {\r\n\treturn new Promise((resolve) => {\r\n\t\tuni.showModal({\r\n\t\t\ttitle,\r\n\t\t\tcontent,\r\n\t\t\tsuccess: (res) => {\r\n\t\t\t\tresolve(res.confirm)\r\n\t\t\t}\r\n\t\t})\r\n\t})\r\n}\r\n\r\n// 获取心情图标\r\nexport const getMoodIcon = (mood) => {\r\n\tconst moodMap = {\r\n\t\thappy: '😊',\r\n\t\tsad: '😢',\r\n\t\tangry: '😠',\r\n\t\texcited: '🤩',\r\n\t\tcalm: '😌',\r\n\t\tanxious: '😰'\r\n\t}\r\n\treturn moodMap[mood] || ''\r\n}\r\n\r\n// 获取天气图标\r\nexport const getWeatherIcon = (weather) => {\r\n\tconst weatherMap = {\r\n\t\tsunny: '☀️',\r\n\t\tcloudy: '☁️',\r\n\t\trainy: '🌧️',\r\n\t\tsnowy: '❄️',\r\n\t\twindy: '💨'\r\n\t}\r\n\treturn weatherMap[weather] || ''\r\n}\r\n\r\n// 获取活动状态\r\nexport const getActivityStatus = (startTime, endTime) => {\r\n\tconst now = new Date()\r\n\tconst start = new Date(startTime)\r\n\tconst end = new Date(endTime)\r\n\t\r\n\tif (now < start) return 'upcoming'\r\n\tif (now >= start && now <= end) return 'ongoing'\r\n\treturn 'ended'\r\n}\r\n\r\n// 获取活动状态文本\r\nexport const getActivityStatusText = (startTime, endTime) => {\r\n\tconst status = getActivityStatus(startTime, endTime)\r\n\tconst statusMap = {\r\n\t\tupcoming: '即将开始',\r\n\t\tongoing: '进行中',\r\n\t\tended: '已结束'\r\n\t}\r\n\treturn statusMap[status]\r\n}\r\n\r\n// 防抖函数\r\nexport const debounce = (func, wait) => {\r\n\tlet timeout\r\n\treturn function executedFunction(...args) {\r\n\t\tconst later = () => {\r\n\t\t\tclearTimeout(timeout)\r\n\t\t\tfunc(...args)\r\n\t\t}\r\n\t\tclearTimeout(timeout)\r\n\t\ttimeout = setTimeout(later, wait)\r\n\t}\r\n}\r\n\r\n// 节流函数\r\nexport const throttle = (func, limit) => {\r\n\tlet inThrottle\r\n\treturn function() {\r\n\t\tconst args = arguments\r\n\t\tconst context = this\r\n\t\tif (!inThrottle) {\r\n\t\t\tfunc.apply(context, args)\r\n\t\t\tinThrottle = true\r\n\t\t\tsetTimeout(() => inThrottle = false, limit)\r\n\t\t}\r\n\t}\r\n}\r\n"],"names":["uni"],"mappings":";;AAGY,MAAC,aAAa,CAAC,MAAM,SAAS,iBAAiB;AAC1D,QAAM,IAAI,IAAI,KAAK,IAAI;AACvB,QAAM,OAAO,EAAE,YAAa;AAC5B,QAAM,QAAQ,OAAO,EAAE,SAAQ,IAAK,CAAC,EAAE,SAAS,GAAG,GAAG;AACtD,QAAM,MAAM,OAAO,EAAE,QAAS,CAAA,EAAE,SAAS,GAAG,GAAG;AAC/C,QAAM,OAAO,OAAO,EAAE,SAAU,CAAA,EAAE,SAAS,GAAG,GAAG;AACjD,QAAM,SAAS,OAAO,EAAE,WAAY,CAAA,EAAE,SAAS,GAAG,GAAG;AACrD,QAAM,SAAS,OAAO,EAAE,WAAY,CAAA,EAAE,SAAS,GAAG,GAAG;AAErD,SAAO,OACL,QAAQ,QAAQ,IAAI,EACpB,QAAQ,MAAM,KAAK,EACnB,QAAQ,MAAM,GAAG,EACjB,QAAQ,MAAM,IAAI,EAClB,QAAQ,MAAM,MAAM,EACpB,QAAQ,MAAM,MAAM;AACvB;AA8BY,MAAC,cAAc,CAAC,OAAO,WAAW,QAAS;AACtDA,gBAAAA,MAAI,UAAU;AAAA,IACb;AAAA,IACA,MAAM;AAAA,IACN;AAAA,EACF,CAAE;AACF;AAGY,MAAC,YAAY,CAAC,OAAO,WAAW,QAAS;AACpDA,gBAAAA,MAAI,UAAU;AAAA,IACb;AAAA,IACA,MAAM;AAAA,IACN;AAAA,EACF,CAAE;AACF;AAgBY,MAAC,cAAc,CAAC,SAAS,QAAQ,SAAS;AACrD,SAAO,IAAI,QAAQ,CAAC,YAAY;AAC/BA,kBAAAA,MAAI,UAAU;AAAA,MACb;AAAA,MACA;AAAA,MACA,SAAS,CAAC,QAAQ;AACjB,gBAAQ,IAAI,OAAO;AAAA,MACnB;AAAA,IACJ,CAAG;AAAA,EACH,CAAE;AACF;AA4BY,MAAC,oBAAoB,CAAC,WAAW,YAAY;AACxD,QAAM,MAAM,oBAAI,KAAM;AACtB,QAAM,QAAQ,IAAI,KAAK,SAAS;AAChC,QAAM,MAAM,IAAI,KAAK,OAAO;AAE5B,MAAI,MAAM;AAAO,WAAO;AACxB,MAAI,OAAO,SAAS,OAAO;AAAK,WAAO;AACvC,SAAO;AACR;AAGY,MAAC,wBAAwB,CAAC,WAAW,YAAY;AAC5D,QAAM,SAAS,kBAAkB,WAAW,OAAO;AACnD,QAAM,YAAY;AAAA,IACjB,UAAU;AAAA,IACV,SAAS;AAAA,IACT,OAAO;AAAA,EACP;AACD,SAAO,UAAU,MAAM;AACxB;;;;;;;"}