{"version":3,"file":"team-detail.js","sources":["pages/team-detail/team-detail.vue","../../../D/HBuilderX.4.56.2025031210/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvdGVhbS1kZXRhaWwvdGVhbS1kZXRhaWwudnVl"],"sourcesContent":["<template>\n\t<view class=\"team-detail-container\">\n\t\t<!-- È°µÈù¢Â§¥ÈÉ® -->\n\t\t<view class=\"header\">\n\t\t\t<view class=\"team-info\">\n\t\t\t\t<view class=\"team-avatar\">\n\t\t\t\t\t{{ teamInfo.name ? teamInfo.name.charAt(0) : 'T' }}\n\t\t\t\t</view>\n\t\t\t\t<view class=\"team-meta\">\n\t\t\t\t\t<text class=\"team-name\">{{ teamInfo.name || 'Âõ¢ÈòüËØ¶ÊÉÖ' }}</text>\n\t\t\t\t\t<text class=\"member-count\">üë• {{ teamInfo.member_count || 0 }} ÊàêÂëò</text>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\n\t\t<!-- Âõ¢ÈòüÊèèËø∞ -->\n\t\t<view class=\"description-section card\" v-if=\"teamInfo.description\">\n\t\t\t<view class=\"section-title\">Âõ¢Èòü‰ªãÁªç</view>\n\t\t\t<text class=\"description-text\">{{ teamInfo.description }}</text>\n\t\t</view>\n\n\t\t<!-- Âõ¢ÈòüÊàêÂëòÂàóË°® -->\n\t\t<view class=\"members-section card\">\n\t\t\t<view class=\"section-header\">\n\t\t\t\t<text class=\"section-title\">Âõ¢ÈòüÊàêÂëò</text>\n\t\t\t\t<text class=\"member-total\">{{ members.length }}‰∫∫</text>\n\t\t\t</view>\n\n\t\t\t<!-- Âä†ËΩΩÁä∂ÊÄÅ -->\n\t\t\t<view v-if=\"loading\" class=\"loading-state\">\n\t\t\t\t<text>Âä†ËΩΩ‰∏≠...</text>\n\t\t\t</view>\n\n\t\t\t<!-- ÊàêÂëòÂàóË°® -->\n\t\t\t<view v-else-if=\"members.length > 0\" class=\"member-list\">\n\t\t\t\t<view \n\t\t\t\t\tclass=\"member-item\" \n\t\t\t\t\tv-for=\"member in members\" \n\t\t\t\t\t:key=\"member.id\"\n\t\t\t\t>\n\t\t\t\t\t<view class=\"member-avatar\">\n\t\t\t\t\t\t<image \n\t\t\t\t\t\t\tv-if=\"member.avatar && member.avatar !== '/images/default-avatar.png'\" \n\t\t\t\t\t\t\t:src=\"member.avatar\" \n\t\t\t\t\t\t\tmode=\"aspectFill\"\n\t\t\t\t\t\t\tclass=\"avatar-image\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<text v-else class=\"avatar-text\">\n\t\t\t\t\t\t\t{{ member.nickname ? member.nickname.charAt(0) : '?' }}\n\t\t\t\t\t\t</text>\n\t\t\t\t\t</view>\n\t\t\t\t\t\n\t\t\t\t\t<view class=\"member-info\">\n\t\t\t\t\t\t<view class=\"member-name-row\">\n\t\t\t\t\t\t\t<text class=\"member-name\">{{ member.nickname }}</text>\n\t\t\t\t\t\t\t<view class=\"role-badge\" :class=\"member.is_leader ? 'leader' : 'member'\">\n\t\t\t\t\t\t\t\t<text class=\"role-icon\" v-if=\"member.is_leader\">üëë</text>\n\t\t\t\t\t\t\t\t<text class=\"role-text\">{{ member.role_name }}</text>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<text class=\"join-time\">{{ formatJoinTime(member.joined_at) }}</text>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\n\t\t\t<!-- Á©∫Áä∂ÊÄÅ -->\n\t\t\t<view v-else class=\"empty-state\">\n\t\t\t\t<text>ÊöÇÊó†ÊàêÂëò‰ø°ÊÅØ</text>\n\t\t\t</view>\n\t\t</view>\n\n\t\t<!-- Âõ¢ÈòüÊìç‰Ωú -->\n\t\t<view class=\"actions-section card\" v-if=\"isLeader\">\n\t\t\t<button class=\"action-btn primary\" @tap=\"viewApplications\">\n\t\t\t\t<text class=\"btn-icon\">üìã</text>\n\t\t\t\t<text class=\"btn-text\">Áî≥ËØ∑ÁÆ°ÁêÜ</text>\n\t\t\t</button>\n\t\t</view>\n\t</view>\n</template>\n\n<script>\nimport { groupApi } from '../../api/index.js'\nimport { showError, showSuccess, formatDate } from '../../utils/index.js'\n\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tteamId: null,\n\t\t\tteamInfo: {},\n\t\t\tmembers: [],\n\t\t\tloading: false,\n\t\t\tisLeader: false\n\t\t}\n\t},\n\t\n\tonLoad(options) {\n\t\tif (options.id) {\n\t\t\tthis.teamId = parseInt(options.id)\n\t\t\tthis.loadTeamDetail()\n\t\t\tthis.loadTeamMembers()\n\t\t}\n\t},\n\t\n\tmethods: {\n\t\t// Âä†ËΩΩÂõ¢ÈòüËØ¶ÊÉÖ\n\t\tasync loadTeamDetail() {\n\t\t\ttry {\n\t\t\t\tconst response = await groupApi.getTeamDetail(this.teamId)\n\t\t\t\tif (response.success) {\n\t\t\t\t\tthis.teamInfo = response.data\n\t\t\t\t\t// ËÆæÁΩÆÈ°µÈù¢Ê†áÈ¢ò\n\t\t\t\t\tuni.setNavigationBarTitle({\n\t\t\t\t\t\ttitle: this.teamInfo.name || 'Âõ¢ÈòüËØ¶ÊÉÖ'\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('Âä†ËΩΩÂõ¢ÈòüËØ¶ÊÉÖÂ§±Ë¥•:', error)\n\t\t\t\tshowError('Âä†ËΩΩÂõ¢ÈòüËØ¶ÊÉÖÂ§±Ë¥•')\n\t\t\t}\n\t\t},\n\n\t\t// Âä†ËΩΩÂõ¢ÈòüÊàêÂëòÂàóË°®\n\t\tasync loadTeamMembers() {\n\t\t\tthis.loading = true\n\t\t\ttry {\n\t\t\t\tconst response = await groupApi.getTeamMembers(this.teamId)\n\t\t\t\tif (response.success) {\n\t\t\t\t\tthis.members = response.data.members || []\n\t\t\t\t\tthis.teamInfo.member_count = response.data.total_members || this.members.length\n\t\t\t\t\t\n\t\t\t\t\t// Ê£ÄÊü•ÂΩìÂâçÁî®Êà∑ÊòØÂê¶ÊòØË¥üË¥£‰∫∫\n\t\t\t\t\tconst currentUser = uni.getStorageSync('userInfo')\n\t\t\t\t\tif (currentUser) {\n\t\t\t\t\t\tthis.isLeader = this.members.some(member => \n\t\t\t\t\t\t\tmember.id === currentUser.id && member.is_leader\n\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('Âä†ËΩΩÂõ¢ÈòüÊàêÂëòÂ§±Ë¥•:', error)\n\t\t\t\tshowError('Âä†ËΩΩÊàêÂëòÂàóË°®Â§±Ë¥•')\n\t\t\t} finally {\n\t\t\t\tthis.loading = false\n\t\t\t}\n\t\t},\n\n\t\t// Ê†ºÂºèÂåñÂä†ÂÖ•Êó∂Èó¥\n\t\tformatJoinTime(dateStr) {\n\t\t\tif (!dateStr) return 'Êú™Áü•'\n\t\t\ttry {\n\t\t\t\tconst date = new Date(dateStr)\n\t\t\t\tconst now = new Date()\n\t\t\t\tconst diffTime = now - date\n\t\t\t\tconst diffDays = Math.floor(diffTime / (1000 * 60 * 60 * 24))\n\t\t\t\t\n\t\t\t\tif (diffDays === 0) {\n\t\t\t\t\treturn '‰ªäÂ§©Âä†ÂÖ•'\n\t\t\t\t} else if (diffDays === 1) {\n\t\t\t\t\treturn 'Êò®Â§©Âä†ÂÖ•'\n\t\t\t\t} else if (diffDays < 30) {\n\t\t\t\t\treturn `${diffDays}Â§©ÂâçÂä†ÂÖ•`\n\t\t\t\t} else {\n\t\t\t\t\treturn formatDate(dateStr, 'YYYYÂπ¥MMÊúàDDÊó•')\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\treturn 'Êú™Áü•'\n\t\t\t}\n\t\t},\n\n\t\t// Êü•ÁúãÁî≥ËØ∑ÁÆ°ÁêÜ\n\t\tviewApplications() {\n\t\t\tuni.navigateTo({\n\t\t\t\turl: `/pages/team-applications/team-applications?teamId=${this.teamId}&teamName=${encodeURIComponent(this.teamInfo.name)}`\n\t\t\t})\n\t\t}\n\t}\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.team-detail-container {\n\tmin-height: 100vh;\n\tbackground-color: #f5f5f5;\n\tpadding: 20rpx;\n}\n\n.header {\n\tbackground: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n\tborder-radius: 16rpx;\n\tpadding: 40rpx;\n\tmargin-bottom: 20rpx;\n\tcolor: white;\n}\n\n.team-info {\n\tdisplay: flex;\n\talign-items: center;\n}\n\n.team-avatar {\n\twidth: 120rpx;\n\theight: 120rpx;\n\tborder-radius: 60rpx;\n\tbackground-color: rgba(255, 255, 255, 0.2);\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tfont-size: 48rpx;\n\tfont-weight: bold;\n\tmargin-right: 30rpx;\n}\n\n.team-meta {\n\tflex: 1;\n}\n\n.team-name {\n\tdisplay: block;\n\tfont-size: 36rpx;\n\tfont-weight: bold;\n\tmargin-bottom: 10rpx;\n\tline-height: 1.3;\n\tword-wrap: break-word;\n\tword-break: break-all;\n}\n\n.member-count {\n\tfont-size: 28rpx;\n\topacity: 0.9;\n}\n\n.card {\n\tbackground-color: white;\n\tborder-radius: 16rpx;\n\tpadding: 30rpx;\n\tmargin-bottom: 20rpx;\n\tbox-shadow: 0 2rpx 12rpx rgba(0, 0, 0, 0.1);\n}\n\n.section-header {\n\tdisplay: flex;\n\tjustify-content: space-between;\n\talign-items: center;\n\tmargin-bottom: 30rpx;\n}\n\n.section-title {\n\tfont-size: 32rpx;\n\tfont-weight: bold;\n\tcolor: #333;\n}\n\n.member-total {\n\tfont-size: 28rpx;\n\tcolor: #666;\n}\n\n.description-text {\n\tfont-size: 28rpx;\n\tcolor: #666;\n\tline-height: 1.6;\n\tword-wrap: break-word;\n\tword-break: break-all;\n}\n\n.member-list {\n\t.member-item {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tpadding: 20rpx 0;\n\t\tborder-bottom: 1rpx solid #f0f0f0;\n\t\t\n\t\t&:last-child {\n\t\t\tborder-bottom: none;\n\t\t}\n\t}\n}\n\n.member-avatar {\n\twidth: 80rpx;\n\theight: 80rpx;\n\tborder-radius: 50%;\n\tmargin-right: 24rpx;\n\tposition: relative;\n\toverflow: hidden;\n\tbackground-color: #f0f0f0;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n}\n\n.avatar-image {\n\twidth: 100%;\n\theight: 100%;\n}\n\n.avatar-text {\n\tfont-size: 32rpx;\n\tcolor: #666;\n\tfont-weight: bold;\n}\n\n.member-info {\n\tflex: 1;\n}\n\n.member-name-row {\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: space-between;\n\tmargin-bottom: 8rpx;\n}\n\n.member-name {\n\tfont-size: 30rpx;\n\tcolor: #333;\n\tfont-weight: 500;\n}\n\n.role-badge {\n\tdisplay: flex;\n\talign-items: center;\n\tpadding: 4rpx 12rpx;\n\tborder-radius: 12rpx;\n\tfont-size: 24rpx;\n\t\n\t&.leader {\n\t\tbackground-color: #fff3cd;\n\t\tcolor: #856404;\n\t}\n\t\n\t&.member {\n\t\tbackground-color: #e7f3ff;\n\t\tcolor: #0066cc;\n\t}\n}\n\n.role-icon {\n\tmargin-right: 4rpx;\n}\n\n.join-time {\n\tfont-size: 24rpx;\n\tcolor: #999;\n}\n\n.loading-state, .empty-state {\n\ttext-align: center;\n\tpadding: 60rpx 0;\n\tcolor: #999;\n\tfont-size: 28rpx;\n}\n\n.actions-section {\n\t.action-btn {\n\t\twidth: 100%;\n\t\theight: 88rpx;\n\t\tborder-radius: 44rpx;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tfont-size: 32rpx;\n\t\tborder: none;\n\t\t\n\t\t&.primary {\n\t\t\tbackground: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n\t\t\tcolor: white;\n\t\t}\n\t}\n\t\n\t.btn-icon {\n\t\tmargin-right: 12rpx;\n\t}\n}\n</style>\n","import MiniProgramPage from 'C:/vscode/kirojianlu/jianlu-uniapp/pages/team-detail/team-detail.vue'\nwx.createPage(MiniProgramPage)"],"names":["groupApi","uni","showError","formatDate"],"mappings":";;;;AAqFA,MAAK,YAAU;AAAA,EACd,OAAO;AACN,WAAO;AAAA,MACN,QAAQ;AAAA,MACR,UAAU,CAAE;AAAA,MACZ,SAAS,CAAE;AAAA,MACX,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,EACA;AAAA,EAED,OAAO,SAAS;AACf,QAAI,QAAQ,IAAI;AACf,WAAK,SAAS,SAAS,QAAQ,EAAE;AACjC,WAAK,eAAe;AACpB,WAAK,gBAAgB;AAAA,IACtB;AAAA,EACA;AAAA,EAED,SAAS;AAAA;AAAA,IAER,MAAM,iBAAiB;AACtB,UAAI;AACH,cAAM,WAAW,MAAMA,UAAAA,SAAS,cAAc,KAAK,MAAM;AACzD,YAAI,SAAS,SAAS;AACrB,eAAK,WAAW,SAAS;AAEzBC,wBAAAA,MAAI,sBAAsB;AAAA,YACzB,OAAO,KAAK,SAAS,QAAQ;AAAA,WAC7B;AAAA,QACF;AAAA,MACC,SAAO,OAAO;AACfA,sBAAAA,MAAA,MAAA,SAAA,4CAAc,aAAa,KAAK;AAChCC,oBAAAA,UAAU,UAAU;AAAA,MACrB;AAAA,IACA;AAAA;AAAA,IAGD,MAAM,kBAAkB;AACvB,WAAK,UAAU;AACf,UAAI;AACH,cAAM,WAAW,MAAMF,UAAAA,SAAS,eAAe,KAAK,MAAM;AAC1D,YAAI,SAAS,SAAS;AACrB,eAAK,UAAU,SAAS,KAAK,WAAW,CAAC;AACzC,eAAK,SAAS,eAAe,SAAS,KAAK,iBAAiB,KAAK,QAAQ;AAGzE,gBAAM,cAAcC,cAAAA,MAAI,eAAe,UAAU;AACjD,cAAI,aAAa;AAChB,iBAAK,WAAW,KAAK,QAAQ;AAAA,cAAK,YACjC,OAAO,OAAO,YAAY,MAAM,OAAO;AAAA,YACxC;AAAA,UACD;AAAA,QACD;AAAA,MACC,SAAO,OAAO;AACfA,sBAAAA,MAAA,MAAA,SAAA,4CAAc,aAAa,KAAK;AAChCC,oBAAAA,UAAU,UAAU;AAAA,MACrB,UAAU;AACT,aAAK,UAAU;AAAA,MAChB;AAAA,IACA;AAAA;AAAA,IAGD,eAAe,SAAS;AACvB,UAAI,CAAC;AAAS,eAAO;AACrB,UAAI;AACH,cAAM,OAAO,IAAI,KAAK,OAAO;AAC7B,cAAM,MAAM,oBAAI,KAAK;AACrB,cAAM,WAAW,MAAM;AACvB,cAAM,WAAW,KAAK,MAAM,YAAY,MAAO,KAAK,KAAK,GAAG;AAE5D,YAAI,aAAa,GAAG;AACnB,iBAAO;AAAA,QACR,WAAW,aAAa,GAAG;AAC1B,iBAAO;AAAA,QACR,WAAW,WAAW,IAAI;AACzB,iBAAO,GAAG,QAAQ;AAAA,eACZ;AACN,iBAAOC,YAAU,WAAC,SAAS,aAAa;AAAA,QACzC;AAAA,MACC,SAAO,OAAO;AACf,eAAO;AAAA,MACR;AAAA,IACA;AAAA;AAAA,IAGD,mBAAmB;AAClBF,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK,qDAAqD,KAAK,MAAM,aAAa,mBAAmB,KAAK,SAAS,IAAI,CAAC;AAAA,OACxH;AAAA,IACF;AAAA,EACD;AACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AChLA,GAAG,WAAW,eAAe;"}