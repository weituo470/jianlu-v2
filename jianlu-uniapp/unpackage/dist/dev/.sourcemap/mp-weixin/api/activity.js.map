{"version":3,"file":"activity.js","sources":["api/activity.js"],"sourcesContent":["import { get, post, put, del } from '../utils/request.js'\n\n// æ´»åŠ¨APIæ¥å£ï¼ˆä½¿ç”¨å°ç¨‹åºä¸“ç”¨APIï¼‰\nexport const activityApi = {\n  // è·å–æ´»åŠ¨åˆ—è¡¨\n  getList(params = {}) {\n    return get('/miniapp/activities', params)\n  },\n\n  // è·å–æ´»åŠ¨è¯¦æƒ…\n  getDetail(id) {\n    return get(`/miniapp/activities/${id}`)\n  },\n\n  // åˆ›å»ºæ´»åŠ¨\n  create(data) {\n    return post('/miniapp/activities', data)\n  },\n\n  // æ›´æ–°æ´»åŠ¨\n  update(id, data) {\n    return put(`/miniapp/activities/${id}`, data)\n  },\n\n  // åˆ é™¤æ´»åŠ¨\n  delete(id) {\n    return del(`/miniapp/activities/${id}`)\n  },\n\n  // æŠ¥åæ´»åŠ¨\n  register(id, data) {\n    return post(`/miniapp/activities/${id}/register`, data)\n  },\n\n  // å–æ¶ˆæŠ¥å\n  cancelRegistration(id) {\n    return del(`/miniapp/activities/${id}/register`)\n  },\n\n  // è·å–æˆ‘çš„æŠ¥ååˆ—è¡¨\n  getMyRegistrations(params = {}) {\n    return get('/miniapp/my-registrations', params)\n  },\n\n  // è·å–æ´»åŠ¨æŠ¥ååˆ—è¡¨ï¼ˆç®¡ç†å‘˜ï¼‰\n  getRegistrations(id, params = {}) {\n    return get(`/miniapp/activities/${id}/registrations`, params)\n  },\n\n  // å®¡æ ¸æŠ¥åï¼ˆç®¡ç†å‘˜ï¼‰\n  approveRegistration(registrationId, approved = true) {\n    return post(`/miniapp/registrations/${registrationId}/approve`, { approved })\n  },\n\n  // æ‰¹é‡å®¡æ ¸æŠ¥åï¼ˆç®¡ç†å‘˜ï¼‰\n  batchApproveRegistrations(registrationIds, approved = true) {\n    return post('/miniapp/registrations/batch-approve', { \n      registration_ids: registrationIds, \n      approved \n    })\n  }\n}\n\n// æ´»åŠ¨ç±»å‹é…ç½®\nexport const activityTypes = {\n  travel: {\n    name: 'æ—…æ¸¸æ´»åŠ¨',\n    icon: 'ğŸ–ï¸',\n    color: '#FF6B6B',\n    description: 'å›¢å»ºæ—…è¡Œã€æˆ·å¤–æ¢é™©ç­‰'\n  },\n  meeting: {\n    name: 'ä¼šè®®æ´»åŠ¨', \n    icon: 'ğŸ’¼',\n    color: '#4ECDC4',\n    description: 'æŠ€æœ¯åˆ†äº«ã€å·¥ä½œä¼šè®®ç­‰'\n  },\n  social: {\n    name: 'ç¤¾äº¤æ´»åŠ¨',\n    icon: 'ğŸ‰',\n    color: '#45B7D1',\n    description: 'èšé¤ã€å¨±ä¹ç­‰'\n  },\n  learning: {\n    name: 'å­¦ä¹ æ´»åŠ¨',\n    icon: 'ğŸ“š',\n    color: '#96CEB4',\n    description: 'åŸ¹è®­ã€è®²åº§ç­‰'\n  },\n  sports: {\n    name: 'è¿åŠ¨æ´»åŠ¨',\n    icon: 'âš½',\n    color: '#FFEAA7',\n    description: 'å¥èº«ã€æ¯”èµ›ç­‰'\n  }\n}\n\n// æ´»åŠ¨çŠ¶æ€é…ç½®\nexport const activityStatus = {\n  draft: {\n    name: 'è‰ç¨¿',\n    color: '#BDC3C7',\n    description: 'æ´»åŠ¨å°šæœªå‘å¸ƒ'\n  },\n  registration: {\n    name: 'æŠ¥åä¸­',\n    color: '#3498DB',\n    description: 'æ­£åœ¨æ¥å—æŠ¥å'\n  },\n  ongoing: {\n    name: 'è¿›è¡Œä¸­',\n    color: '#2ECC71',\n    description: 'æ´»åŠ¨æ­£åœ¨è¿›è¡Œ'\n  },\n  completed: {\n    name: 'å·²ç»“æŸ',\n    color: '#95A5A6',\n    description: 'æ´»åŠ¨å·²ç»ç»“æŸ'\n  },\n  cancelled: {\n    name: 'å·²å–æ¶ˆ',\n    color: '#E74C3C',\n    description: 'æ´»åŠ¨å·²è¢«å–æ¶ˆ'\n  }\n}\n\n// æŠ¥åçŠ¶æ€é…ç½®\nexport const registrationStatus = {\n  pending: {\n    name: 'å¾…å®¡æ ¸',\n    color: '#F39C12',\n    description: 'ç­‰å¾…ç®¡ç†å‘˜å®¡æ ¸'\n  },\n  approved: {\n    name: 'å·²é€šè¿‡',\n    color: '#27AE60',\n    description: 'æŠ¥åå·²é€šè¿‡'\n  },\n  rejected: {\n    name: 'å·²æ‹’ç»',\n    color: '#E74C3C',\n    description: 'æŠ¥åè¢«æ‹’ç»'\n  },\n  cancelled: {\n    name: 'å·²å–æ¶ˆ',\n    color: '#95A5A6',\n    description: 'ç”¨æˆ·å–æ¶ˆæŠ¥å'\n  },\n  waitlist: {\n    name: 'ç­‰å¾…åˆ—è¡¨',\n    color: '#8E44AD',\n    description: 'åœ¨ç­‰å¾…åˆ—è¡¨ä¸­'\n  }\n}\n\n// æ´»åŠ¨å¯è§æ€§é…ç½®\nexport const activityVisibility = {\n  public: {\n    name: 'å…¬å¼€æ´»åŠ¨',\n    icon: 'ğŸŒ',\n    description: 'æ‰€æœ‰ç”¨æˆ·å¯è§'\n  },\n  team: {\n    name: 'å›¢é˜Ÿæ´»åŠ¨',\n    icon: 'ğŸ‘¥',\n    description: 'ä»…å›¢é˜Ÿæˆå‘˜å¯è§'\n  }\n}\n\n// å·¥å…·å‡½æ•°\nexport const activityUtils = {\n  // è·å–æ´»åŠ¨ç±»å‹ä¿¡æ¯\n  getTypeInfo(type) {\n    return activityTypes[type] || { name: 'æœªçŸ¥ç±»å‹', icon: 'â“', color: '#BDC3C7' }\n  },\n\n  // è·å–æ´»åŠ¨çŠ¶æ€ä¿¡æ¯\n  getStatusInfo(status) {\n    return activityStatus[status] || { name: 'æœªçŸ¥çŠ¶æ€', color: '#BDC3C7' }\n  },\n\n  // è·å–æŠ¥åçŠ¶æ€ä¿¡æ¯\n  getRegistrationStatusInfo(status) {\n    return registrationStatus[status] || { name: 'æœªçŸ¥çŠ¶æ€', color: '#BDC3C7' }\n  },\n\n  // è·å–å¯è§æ€§ä¿¡æ¯\n  getVisibilityInfo(visibility) {\n    return activityVisibility[visibility] || { name: 'æœªçŸ¥', icon: 'â“' }\n  },\n\n  // æ ¼å¼åŒ–æ´»åŠ¨æ—¶é—´\n  formatActivityTime(startTime, endTime) {\n    const start = new Date(startTime)\n    const end = new Date(endTime)\n    const now = new Date()\n\n    const formatDate = (date) => {\n      const year = date.getFullYear()\n      const month = String(date.getMonth() + 1).padStart(2, '0')\n      const day = String(date.getDate()).padStart(2, '0')\n      const hour = String(date.getHours()).padStart(2, '0')\n      const minute = String(date.getMinutes()).padStart(2, '0')\n      \n      return `${year}-${month}-${day} ${hour}:${minute}`\n    }\n\n    const isSameDay = start.toDateString() === end.toDateString()\n    \n    if (isSameDay) {\n      return `${formatDate(start)} - ${end.getHours().toString().padStart(2, '0')}:${end.getMinutes().toString().padStart(2, '0')}`\n    } else {\n      return `${formatDate(start)} - ${formatDate(end)}`\n    }\n  },\n\n  // æ£€æŸ¥æ´»åŠ¨æ˜¯å¦å¯ä»¥æŠ¥å\n  canRegister(activity) {\n    const now = new Date()\n    const registrationDeadline = activity.registration_deadline ? new Date(activity.registration_deadline) : null\n    \n    // æ£€æŸ¥æ´»åŠ¨çŠ¶æ€\n    if (activity.status !== 'registration') {\n      return { canRegister: false, reason: 'æ´»åŠ¨æœªå¼€æ”¾æŠ¥å' }\n    }\n\n    // æ£€æŸ¥æŠ¥åæˆªæ­¢æ—¶é—´\n    if (registrationDeadline && now > registrationDeadline) {\n      return { canRegister: false, reason: 'æŠ¥åå·²æˆªæ­¢' }\n    }\n\n    // æ£€æŸ¥äººæ•°é™åˆ¶\n    if (activity.max_participants > 0 && activity.registration_count >= activity.max_participants) {\n      return { canRegister: false, reason: 'æŠ¥åäººæ•°å·²æ»¡' }\n    }\n\n    // æ£€æŸ¥ç”¨æˆ·æ˜¯å¦å·²æŠ¥å\n    if (activity.user_registered) {\n      return { canRegister: false, reason: 'å·²ç»æŠ¥å' }\n    }\n\n    return { canRegister: true }\n  },\n\n  // è·å–æ´»åŠ¨è¿›åº¦ç™¾åˆ†æ¯”\n  getProgressPercentage(activity) {\n    if (!activity.max_participants || activity.max_participants <= 0) {\n      return 0 // æ— é™åˆ¶æ—¶ä¸æ˜¾ç¤ºè¿›åº¦\n    }\n\n    const percentage = (activity.registration_count / activity.max_participants) * 100\n    // ä½¿ç”¨ Math.floor ç¡®ä¿åªè¿”å›æ•´æ•°éƒ¨åˆ†\n    return Math.floor(Math.min(percentage, 100))\n  }\n}\n"],"names":["get","post","put","del"],"mappings":"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"}