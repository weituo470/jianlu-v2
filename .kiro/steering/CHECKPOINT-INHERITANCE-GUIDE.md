# 🧬 任务检查点遗传机制指南

## 📋 机制概述

这是一个跨对话窗口的任务状态传承系统，确保复杂任务能够在多个对话窗口间无缝继续。

## 🔄 遗传文件规则

### 命名规范
```
TASK-CHECKPOINT-YYYYMMDD-HHMM.md
```
- `YYYYMMDD`: 创建日期（如20250115）
- `HHMM`: 创建时间（如1430表示14:30）

### 版本控制
- **初始版本**: v1.0
- **每次传承**: 版本号+0.1
- **重大更新**: 主版本号+1

### 遗传代数
- **第1代**: 原始任务创建
- **第2代**: 第一次对话打包传承
- **第N代**: 第N-1次传承

## 📝 更新流程

### 对话结束前（当前AI）
1. **评估任务状态**
   - 记录本次对话的主要成果
   - 识别关键决策和技术选择
   - 评估风险等级变化

2. **创建新遗传文件**
   ```bash
   # 文件名格式
   TASK-CHECKPOINT-$(date +%Y%m%d-%H%M).md
   ```

3. **更新文件头部**
   ```markdown
   **文件版本**: v1.1  
   **创建时间**: 2025-01-15 16:45  
   **对话窗口**: Session-001 → Session-002  
   **遗传代数**: 第2代  
   ```

4. **添加历史记录**
   ```markdown
   ### Session-001 (2025-01-15 10:00-14:30)
   - **主要成果**: [具体成果]
   - **关键决策**: [重要决策]
   - **风险变化**: [风险等级变化]
   ```

### 新对话开始时（新AI）
1. **查找最新遗传文件**
   - 按文件名时间戳排序
   - 读取最新的检查点文件

2. **理解任务上下文**
   - 阅读总体目标和当前状态
   - 了解技术上下文和关键文件
   - 查看历史决策和经验教训

3. **确认下一步行动**
   - 根据当前阶段执行相应任务
   - 遵循既定的修复计划
   - 保持技术选择的一致性

## 🎯 遗传内容标准

### 必须包含的信息
- [ ] **任务总体目标**和分阶段计划
- [ ] **当前状态**和完成进度
- [ ] **技术上下文**（架构、端口、数据库等）
- [ ] **关键文件状态**清单
- [ ] **风险评估表格**
- [ ] **验证命令**和测试方法
- [ ] **历史决策记录**
- [ ] **下一步行动计划**

### 推荐包含的信息
- [ ] **关键代码片段**或配置示例
- [ ] **已知问题**和解决方案
- [ ] **性能指标**和改进数据
- [ ] **依赖关系**和外部约束
- [ ] **回滚方案**和应急预案

## 🔍 质量检查清单

### 信息完整性
- [ ] 新AI能否仅通过遗传文件理解任务？
- [ ] 技术细节是否足够详细？
- [ ] 历史决策的原因是否清楚？
- [ ] 下一步行动是否明确可执行？

### 可操作性
- [ ] 包含具体的命令和文件路径？
- [ ] 验证步骤是否可重现？
- [ ] 错误处理方案是否完整？
- [ ] 成功标准是否明确？

### 连续性
- [ ] 与前一代文件的关联是否清晰？
- [ ] 任务进展的逻辑是否连贯？
- [ ] 技术选择是否保持一致？
- [ ] 风险评估是否准确更新？

## 📊 遗传效果评估

### 成功指标
- **任务连续性**: 新AI能在5分钟内理解并继续任务
- **信息保真度**: 关键决策和技术选择得到保持
- **效率提升**: 避免重复分析和决策过程
- **质量保证**: 遵循既定的开发原则和标准

### 失败信号
- 新AI需要重新分析项目结构
- 技术方案出现不一致或冲突
- 重复已解决的问题
- 偏离原定的修复计划

## 🚨 注意事项

### 文件管理
- **保留历史**: 不要删除旧的遗传文件
- **命名一致**: 严格遵循命名规范
- **版本控制**: 确保版本号正确递增
- **备份重要**: 定期备份遗传文件

### 内容更新
- **及时更新**: 对话结束前必须更新
- **准确记录**: 如实记录成果和问题
- **详细描述**: 关键决策要有充分说明
- **前瞻规划**: 为下次对话提供明确指导

### 使用规范
- **优先读取**: 新对话必须先读取遗传文件
- **严格遵循**: 按照遗传文件的指导执行
- **及时反馈**: 发现问题及时在遗传文件中记录
- **持续改进**: 根据使用效果优化遗传机制

## 📝 模板示例

### 文件头部模板
```markdown
# 🧬 任务检查点遗传文件 - [任务名称]

**文件版本**: v[X.Y]  
**创建时间**: YYYY-MM-DD HH:MM  
**对话窗口**: Session-00X → Session-00Y  
**任务ID**: [TASK-ID]  
**遗传代数**: 第X代  
```

### 历史记录模板
```markdown
### Session-00X (YYYY-MM-DD HH:MM-HH:MM)
- **主要成果**: [本次对话的主要成果]
- **关键决策**: [重要的技术或策略决策]
- **技术选择**: [采用的技术方案和原因]
- **修复进展**: [具体的修复进展]
- **创建文件**: [新建的重要文件]
- **风险变化**: [风险等级的变化]
- **遗留问题**: [未解决的问题]
- **下次重点**: [下次对话的重点任务]
```

---

**创建时间**: 2025-01-15  
**适用范围**: 所有跨对话窗口的复杂任务  
**维护责任**: 每个参与任务的AI助手  
**更新频率**: 每次对话打包时