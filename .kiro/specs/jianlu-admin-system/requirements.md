# 简庐管理后台系统需求文档

## 介绍

简庐管理后台系统是一个综合性的团队协作和个人日记管理平台的后台管理系统。该系统用于管理整个简庐生态系统的用户、团队、活动等核心数据，为系统管理员、运营人员和团队管理员提供统一的管理界面。

## 需求

### 需求 1：用户认证与权限管理

**用户故事：** 作为系统管理员，我希望能够安全地登录系统并根据角色获得相应权限，以便管理平台的各项功能。

#### 验收标准

1. WHEN 管理员输入正确的用户名和密码 THEN 系统 SHALL 验证凭据并生成JWT Token
2. WHEN 管理员登录成功 THEN 系统 SHALL 跳转到仪表板页面
3. WHEN 管理员输入错误凭据 THEN 系统 SHALL 显示错误信息并记录失败次数
4. WHEN 管理员连续登录失败超过5次 THEN 系统 SHALL 锁定账户15分钟
5. WHEN 管理员访问功能页面 THEN 系统 SHALL 根据用户角色验证访问权限
6. IF 用户角色为超级管理员 THEN 系统 SHALL 允许访问所有功能
7. IF 用户角色为系统管理员 THEN 系统 SHALL 仅允许访问用户管理和系统配置
8. IF 用户角色为运营管理员 THEN 系统 SHALL 仅允许访问活动管理和数据分析
9. IF 用户角色为团队管理员 THEN 系统 SHALL 仅允许访问团队成员管理

### 需求 2：仪表板数据展示

**用户故事：** 作为管理员，我希望在仪表板上看到系统的关键数据统计和实时状态，以便快速了解平台运营情况。

#### 验收标准

1. WHEN 管理员访问仪表板 THEN 系统 SHALL 显示总用户数、新增用户数和活跃用户数
2. WHEN 管理员查看用户统计 THEN 系统 SHALL 显示日、周、月维度的用户增长趋势图
3. WHEN 管理员查看团队统计 THEN 系统 SHALL 显示总团队数、活跃团队数和平均团队规模
4. WHEN 管理员查看活动统计 THEN 系统 SHALL 显示总活动数、进行中活动数和活动参与率
5. WHEN 管理员查看系统监控 THEN 系统 SHALL 显示服务器状态、数据库连接状态和API响应时间
6. WHEN 管理员查看用户活动监控 THEN 系统 SHALL 显示当前在线用户数和最近登录用户列表
7. WHEN 系统检测到异常登录 THEN 系统 SHALL 在仪表板显示异常登录提醒

### 需求 3：用户管理

**用户故事：** 作为系统管理员，我希望能够查看、创建、编辑和管理所有用户账户，以便维护平台的用户体系。

#### 验收标准

1. WHEN 管理员访问用户列表 THEN 系统 SHALL 显示用户ID、用户名、昵称、邮箱、注册时间、最后登录时间、用户状态和角色
2. WHEN 管理员搜索用户 THEN 系统 SHALL 支持按用户名、邮箱、昵称进行模糊搜索
3. WHEN 管理员筛选用户 THEN 系统 SHALL 支持按状态、角色、注册时间进行筛选
4. WHEN 用户列表超过20条记录 THEN 系统 SHALL 提供分页功能
5. WHEN 管理员选择多个用户 THEN 系统 SHALL 支持批量启用、禁用或删除操作
6. WHEN 管理员点击用户详情 THEN 系统 SHALL 显示用户的基本信息、账户管理和活动记录
7. WHEN 管理员创建新用户 THEN 系统 SHALL 要求输入用户名、邮箱、密码和角色
8. WHEN 管理员编辑用户信息 THEN 系统 SHALL 允许修改基本信息、角色和权限
9. WHEN 管理员重置用户密码 THEN 系统 SHALL 生成临时密码并发送邮件通知
10. WHEN 管理员删除用户 THEN 系统 SHALL 执行软删除并保留数据恢复能力

### 需求 4：团队管理

**用户故事：** 作为运营管理员，我希望能够管理平台上的所有团队，包括查看团队信息、管理成员和监控团队活动。

#### 验收标准

1. WHEN 管理员访问团队列表 THEN 系统 SHALL 显示团队ID、名称、描述、创建者、创建时间、成员数量、活动数量和状态
2. WHEN 管理员搜索团队 THEN 系统 SHALL 支持按团队名称进行模糊搜索
3. WHEN 管理员筛选团队 THEN 系统 SHALL 支持按状态、创建时间、成员数量进行筛选
4. WHEN 管理员查看团队详情 THEN 系统 SHALL 显示团队基本信息、成员列表和活动列表
5. WHEN 管理员管理团队成员 THEN 系统 SHALL 支持添加、移除成员和设置成员角色
6. WHEN 管理员创建团队 THEN 系统 SHALL 要求输入团队名称、描述和指定管理员
7. WHEN 管理员编辑团队 THEN 系统 SHALL 允许修改团队信息和更换负责人
8. WHEN 管理员停用团队 THEN 系统 SHALL 将团队状态设为非活跃并通知成员
9. WHEN 管理员解散团队 THEN 系统 SHALL 要求确认并处理相关数据清理

### 需求 5：活动管理

**用户故事：** 作为运营管理员，我希望能够管理平台上的所有活动，包括审核、编辑和监控活动状态。

#### 验收标准

1. WHEN 管理员访问活动列表 THEN 系统 SHALL 显示活动ID、标题、描述、创建者、所属团队、时间、参与人数和状态
2. WHEN 管理员搜索活动 THEN 系统 SHALL 支持按活动标题进行模糊搜索
3. WHEN 管理员筛选活动 THEN 系统 SHALL 支持按状态、时间范围、所属团队进行筛选
4. WHEN 管理员查看活动详情 THEN 系统 SHALL 显示活动完整信息、参与者列表和签到记录
5. WHEN 管理员审核活动 THEN 系统 SHALL 支持批准、拒绝或要求修改
6. WHEN 管理员编辑活动 THEN 系统 SHALL 允许修改活动信息、时间和状态
7. WHEN 管理员取消活动 THEN 系统 SHALL 更新活动状态并通知参与者
8. WHEN 管理员归档活动 THEN 系统 SHALL 将活动移至历史记录

### 需求 6：内容管理

**用户故事：** 作为运营管理员，我希望能够审核和管理用户发布的日记内容和评论，以维护平台内容质量。

#### 验收标准

1. WHEN 管理员访问日记列表 THEN 系统 SHALL 显示所有用户的日记条目及审核状态
2. WHEN 管理员筛选日记 THEN 系统 SHALL 支持按用户、时间、标签、审核状态进行筛选
3. WHEN 管理员审核日记 THEN 系统 SHALL 支持批准、拒绝或标记不当内容
4. WHEN 管理员删除不当内容 THEN 系统 SHALL 执行软删除并记录操作日志
5. WHEN 管理员访问评论列表 THEN 系统 SHALL 显示所有评论信息和审核状态
6. WHEN 管理员处理用户举报 THEN 系统 SHALL 提供举报详情和处理选项
7. WHEN 管理员恢复被删除内容 THEN 系统 SHALL 验证权限并恢复内容可见性

### 需求 7：系统设置

**用户故事：** 作为超级管理员，我希望能够配置系统参数和安全设置，以确保平台的正常运行和安全性。

#### 验收标准

1. WHEN 管理员访问系统设置 THEN 系统 SHALL 显示基础配置和安全设置选项
2. WHEN 管理员修改系统名称和Logo THEN 系统 SHALL 更新配置并在前台生效
3. WHEN 管理员设置系统公告 THEN 系统 SHALL 在用户界面显示公告信息
4. WHEN 管理员配置功能开关 THEN 系统 SHALL 根据设置启用或禁用相应功能
5. WHEN 管理员设置密码策略 THEN 系统 SHALL 在用户创建或修改密码时应用策略
6. WHEN 管理员配置IP白名单 THEN 系统 SHALL 仅允许白名单IP访问管理后台
7. WHEN 管理员设置访问频率限制 THEN 系统 SHALL 对超出限制的请求进行拦截
8. WHEN 系统记录安全日志 THEN 系统 SHALL 包含时间、用户、操作和结果信息